name: Playwright Tests
 
on:

  push:

    branches: [main, master]

  pull_request:

    branches: [main, master]
 
jobs:

  test:

    runs-on: ubuntu-latest
 
    permissions:

      contents: write

      pages: write

      id-token: write
 
    steps:

    - uses: actions/checkout@v4
 
    - uses: actions/setup-node@v4

      with:

        node-version: lts/*
 
    - name: Install dependencies

      run: npm ci
 
    - name: Install Playwright Browsers

      run: npx playwright install --with-deps
 
    - name: Run Playwright tests

      run: npx playwright test --reporter=html
 
    - name: Deploy report to GitHub Pages

      uses: JamesIves/github-pages-deploy-action@v4

      with:

        branch: gh-pages

        folder: playwright-report

        clean: true

 